
@if (loading()) {
  <div class="flex flex-col items-center justify-center p-10 bg-white rounded-lg shadow-md">
    <div class="animate-spin rounded-full h-16 w-16 border-b-4 border-indigo-600"></div>
    <p class="mt-4 text-xl text-gray-700">Loading Customer Database...</p>
  </div>
} @else {
  <div class="p-6 bg-white rounded-lg shadow-md">
    <h1 class="text-3xl font-bold text-gray-800 mb-6">Customer Database</h1>

    @if (customers().length > 0) {
      <div class="overflow-x-auto bg-white rounded-lg shadow-inner border">
        <table class="min-w-full leading-normal">
          <thead>
            <tr class="bg-gray-100 text-gray-600 uppercase text-sm leading-normal">
              <th class="py-3 px-6 text-left">Customer Name</th>
              <th class="py-3 px-6 text-left">Contact No.</th>
              <th class="py-3 px-6 text-center">Total Orders</th>
              <th class="py-3 px-6 text-center">Status</th>
            </tr>
          </thead>
          <tbody class="text-gray-700 text-sm font-light">
            @for (customer of customers(); track customer.contactNo) {
              <tr class="border-b border-gray-200 hover:bg-gray-50">
                <td class="py-3 px-6 text-left whitespace-nowrap font-medium">{{ customer.name }}</td>
                <td class="py-3 px-6 text-left font-mono">{{ customer.contactNo }}</td>
                <td class="py-3 px-6 text-center font-semibold">{{ customer.orderCount }}</td>
                <td class="py-3 px-6 text-center">
                  @if (customer.isRegular) {
                    <span class="py-1 px-3 rounded-full text-xs font-medium bg-green-200 text-green-800">Regular</span>
                  } @else {
                     <span class="py-1 px-3 rounded-full text-xs font-medium bg-blue-200 text-blue-800">New</span>
                  }
                </td>
              </tr>
            }
          </tbody>
        </table>
      </div>
    } @else {
      <p class="text-gray-600 p-4 text-center">No customer data found. Customers will appear here as you create new orders.</p>
    }
  </div>
}
